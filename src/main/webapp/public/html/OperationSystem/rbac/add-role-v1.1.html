<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>新增角色</title>
    <link rel="stylesheet" href="../../../dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="../../../dist/css/content.css">
    <link rel="stylesheet" href="../../../dist/css/main.css">
    <style type="text/css">
        .checkbox-item-wrap{display: inline-block; min-width: 110px;white-space: nowrap;}
    </style>
</head>
<body>
    <div class="container-main">
        <div class="container-wrapper">

            <!-- 头部 -->
            <div class="container-header js-container-header">
                <h5>新增角色</h5>
                <div class="right-btn">
                    <button class="btn btn-info" type="button"><span class="icon icon-save icon-left"></span>编辑</button>
                    <button class="btn btn-warning js-close-current-tab" type="button"><span class="icon icon-delete icon-left"></span>取消</button>
                </div>
            </div>
            <!-- 头部 END -->

            <!-- 编辑权限 -->
            <div class="module-wrapper row">

                <div class="module row-box">
                    <div class="module-content">
                        <form method="get" class="form-horizontal">
                            <div class="form-group">
                                <label class="w-label control-label"><span class="must">*</span>角色：</label>
                                <div class="w-info">
                                    <input type="text" class="form-control" placeholder="角色名称">
                                </div>
                                <span class="checked-tip"></span>
                            </div>
                            <div class="form-group">
                                <label class="w-label control-label">部门和职位：</label>
                                <div class="w-info">
                                    <input type="text" class="form-control" placeholder="选择职位">
                                </div>
                                <span class="checked-tip"></span>
                            </div>

                            <div class="form-group">
                                <label class="w-label control-label"><span class="must">*</span>城市：</label>
                                <div class="w-info">
                                    <label class="radio-label"><input type="radio" value="0" name="city_limit">不限</label>
                                    <label class="radio-label"><input type="radio" value="0" name="city_limit" checked="">限制</label>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="w-label control-label"></label>
                                <div class="w-info">
                                    <div class="blur-panel js-blur-panel full-width">
                                        <input type="text" class="form-control form-list js-blur-input" placeholder="深圳">
                                        <span class="icon icon-menu-block-down"></span>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="w-label control-label"><span class="must">*</span>状态：</label>
                                <div class="w-info">
                                    <label class="radio-label"><input type="radio" value="0" name="status" checked="">正常</label>
                                    <label class="radio-label"><input type="radio" value="0" name="status">停用</label>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="w-label control-label"><span class="must">*</span>允许访问：</label>
                                <div class="w-info">


                                </div>
                                <span class="checked-tip"></span>
                            </div>

                            <!--表格方案3 表格明细 -->
                            <table class="setting-table">
                                <tr>
                                    <th>板块</th>
                                    <th>模块</th>
                                    <th>栏目</th>
                                </tr>

                                <!-- 第一板块 -->
                                <!-- <tr>
                                    <td rowspan="3">
                                        <div class="checkbox-wrap js-checkbox-wrap">
                                            <input type="checkbox">
                                            <label class="checkbox"><span class="glyphicon glyphicon-ok"></span></label>
                                        </div>
                                        <span>内容管理</span>
                                    </td>


                                    <td>
                                        <div class="checkbox-wrap js-checkbox-wrap">
                                            <input type="checkbox">
                                            <label class="checkbox"><span class="glyphicon glyphicon-ok"></span></label>
                                        </div>
                                        <span>内容管理</span>
                                        
                                    </td>

                                    <td>
                                        <div class="checkbox-wrap js-checkbox-wrap">
                                            <input type="checkbox">
                                            <label class="checkbox"><span class="glyphicon glyphicon-ok"></span></label>
                                        </div>
                                        <span>内容管理</span>

                                        <div class="checkbox-wrap js-checkbox-wrap">
                                            <input type="checkbox">
                                            <label class="checkbox"><span class="glyphicon glyphicon-ok"></span></label>
                                        </div>
                                        <span>内容管理</span>

                                        <div class="checkbox-wrap js-checkbox-wrap">
                                            <input type="checkbox">
                                            <label class="checkbox"><span class="glyphicon glyphicon-ok"></span></label>
                                        </div>
                                        <span>内容管理</span>
                                    </td>

                                </tr>

                                <tr>

                                    <td>
                                        <div class="checkbox-wrap js-checkbox-wrap">
                                            <input type="checkbox">
                                            <label class="checkbox"><span class="glyphicon glyphicon-ok"></span></label>
                                        </div>
                                        <span>内容管理</span>

                                        
                                    </td>

                                    <td>
                                        <div class="checkbox-wrap js-checkbox-wrap">
                                            <input type="checkbox">
                                            <label class="checkbox"><span class="glyphicon glyphicon-ok"></span></label>
                                        </div>
                                        <span>内容管理</span>
                                        
                                        <div class="checkbox-wrap js-checkbox-wrap">
                                            <input type="checkbox">
                                            <label class="checkbox"><span class="glyphicon glyphicon-ok"></span></label>
                                        </div>
                                        <span>内容管理</span>

                                    </td>
                                
                                </tr>


                                <tr>

                                    <td>
                                        <div class="checkbox-wrap js-checkbox-wrap">
                                            <input type="checkbox">
                                            <label class="checkbox"><span class="glyphicon glyphicon-ok"></span></label>
                                        </div>
                                        <span>内容管理</span>

                                        
                                    </td>
                                    
                                    <td>
                                        <div class="checkbox-wrap js-checkbox-wrap">
                                            <input type="checkbox">
                                            <label class="checkbox"><span class="glyphicon glyphicon-ok"></span></label>
                                        </div>
                                        <span>内容管理</span>

                                        <div class="checkbox-wrap js-checkbox-wrap">
                                            <input type="checkbox">
                                            <label class="checkbox"><span class="glyphicon glyphicon-ok"></span></label>
                                        </div>
                                        <span>内容管理</span>

                                        <div class="checkbox-wrap js-checkbox-wrap">
                                            <input type="checkbox">
                                            <label class="checkbox"><span class="glyphicon glyphicon-ok"></span></label>
                                        </div>
                                        <span>内容管理</span>

                                        <div class="checkbox-wrap js-checkbox-wrap">
                                            <input type="checkbox">
                                            <label class="checkbox"><span class="glyphicon glyphicon-ok"></span></label>
                                        </div>
                                        <span>内容管理</span>

                                    </td>
                                
                                </tr> -->

                                <!-- 第二板块 -->
                                <!-- <tr>
                                    <td rowspan="3">
                                        <div class="checkbox-wrap js-checkbox-wrap">
                                            <input type="checkbox">
                                            <label class="checkbox"><span class="glyphicon glyphicon-ok"></span></label>
                                        </div>
                                        <span>内容管理</span>
                                    </td>


                                    <td>
                                        <div class="checkbox-wrap js-checkbox-wrap">
                                            <input type="checkbox">
                                            <label class="checkbox"><span class="glyphicon glyphicon-ok"></span></label>
                                        </div>
                                        <span>内容管理</span>
                                        
                                    </td>

                                    <td>
                                        <div class="checkbox-wrap js-checkbox-wrap">
                                            <input type="checkbox">
                                            <label class="checkbox"><span class="glyphicon glyphicon-ok"></span></label>
                                        </div>
                                        <span>内容管理</span>

                                        <div class="checkbox-wrap js-checkbox-wrap">
                                            <input type="checkbox">
                                            <label class="checkbox"><span class="glyphicon glyphicon-ok"></span></label>
                                        </div>
                                        <span>内容管理</span>

                                        <div class="checkbox-wrap js-checkbox-wrap">
                                            <input type="checkbox">
                                            <label class="checkbox"><span class="glyphicon glyphicon-ok"></span></label>
                                        </div>
                                        <span>内容管理</span>
                                    </td>

                                </tr>

                                <tr>

                                    <td>
                                        <div class="checkbox-wrap js-checkbox-wrap">
                                            <input type="checkbox">
                                            <label class="checkbox"><span class="glyphicon glyphicon-ok"></span></label>
                                        </div>
                                        <span>内容管理</span>

                                        
                                    </td>

                                    <td>
                                        <div class="checkbox-wrap js-checkbox-wrap">
                                            <input type="checkbox">
                                            <label class="checkbox"><span class="glyphicon glyphicon-ok"></span></label>
                                        </div>
                                        <span>内容管理</span>
                                        
                                        <div class="checkbox-wrap js-checkbox-wrap">
                                            <input type="checkbox">
                                            <label class="checkbox"><span class="glyphicon glyphicon-ok"></span></label>
                                        </div>
                                        <span>内容管理</span>

                                    </td>
                                
                                </tr>

                                <tr>

                                    <td>
                                        <div class="checkbox-wrap js-checkbox-wrap">
                                            <input type="checkbox">
                                            <label class="checkbox"><span class="glyphicon glyphicon-ok"></span></label>
                                        </div>
                                        <span>内容管理</span>

                                        
                                    </td>

                                    <td>
                                        <div class="checkbox-wrap js-checkbox-wrap">
                                            <input type="checkbox">
                                            <label class="checkbox"><span class="glyphicon glyphicon-ok"></span></label>
                                        </div>
                                        <span>内容管理</span>
                                        
                                        <div class="checkbox-wrap js-checkbox-wrap">
                                            <input type="checkbox">
                                            <label class="checkbox"><span class="glyphicon glyphicon-ok"></span></label>
                                        </div>
                                        <span>内容管理</span>

                                    </td>
                                
                                </tr> -->
                                
                                
                                <!-- 全选行 -->
                                <tr>
                                    <td>
                                        <div class="checkbox-wrap js-all-checkbox-wrap">
                                            <input type="checkbox">
                                            <label class="checkbox"><span class="glyphicon glyphicon-ok"></span></label>
                                        </div>
                                        <span>全选</span>
                                    </td>
                                    <td></td>
                                    <td></td>
                                </tr>
                            </table>
                            <!-- 表格明细 END -->



                            <!-- 表格方案1 -->

                            <!-- <style type="text/css">
                                .td-wraper{width: 100%;background: blue;}
                                .td{float: left;min-width: 60px;background: red;display: table-row;}
                                .td-title{border: 1px solid black;display: table-cell;}
                                .td-title-wraper{float: left;display: flex;flex-direction:column; }
                            </style>

                            <div class="td-wraper">
                                <div class="td">
                                    <div class="td-title-wraper">
                                        <div class="td-title">1</div>
                                    </div>
                                    

                                    <div class="td">
                                        <div class="td-title-wraper">
                                            <div class="td-title">2</div>
                                            <div class="td-title">3</div>
                                        </div>
                                        

                                        <div class="td">
                                            <div class="td-title-wraper">
                                                <div class="td-title">4</div>
                                                <div class="td-title">5</div>
                                                <div class="td-title">6</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div> -->


                            <!--表格方案2 表格明细 -->
                                <!-- <div class="setting-table">
                                    <div class="setting-table-tr">
                                        <div class="setting-table-th">板块</div>
                                        <div class="setting-table-th">模块</div>
                                        <div class="setting-table-th">页面</div>                                            
                                    </div>
                                    <div class="setting-table-tr">
                                        <div class="setting-table-tr">
                                            <div class="setting-table-td">
                                                <div class="center js-check-wrap">
                                                    <div class="checkbox-wrap js-select-all-check">
                                                        <input type="checkbox">
                                                        <label class="checkbox"><span class="glyphicon glyphicon-ok"></span></label>
                                                    </div>
                                                </div>
                                                <span>内容管理</span>

                                                    <div class="setting-table-tr">

                                                        <div class="setting-table-td">
                                                            <div class="center js-check-wrap">
                                                                <div class="checkbox-wrap js-select-all-check">
                                                                    <input type="checkbox">
                                                                    <label class="checkbox"><span class="glyphicon glyphicon-ok"></span></label>
                                                                </div>
                                                            </div>
                                                            <span>内容管理</span>
                                                        </div>
                                                        <div class="setting-table-td">

                                                            <div class="center js-check-wrap">
                                                                <div class="checkbox-wrap js-select-all-check">
                                                                    <input type="checkbox">
                                                                    <label class="checkbox"><span class="glyphicon glyphicon-ok"></span></label>
                                                                </div>
                                                            </div>
                                                            <span>内容管理</span>

                                                            
                                                        </div>

                                                        <div class="setting-table-tr">
                                                            <div class="setting-table-td">
                                                                <div class="center js-check-wrap">
                                                                    <div class="checkbox-wrap js-select-all-check">
                                                                        <input type="checkbox">
                                                                        <label class="checkbox"><span class="glyphicon glyphicon-ok"></span></label>
                                                                    </div>
                                                                </div>
                                                                <span>内容管理</span>

                                                                <div class="center js-check-wrap">
                                                                    <div class="checkbox-wrap js-select-all-check">
                                                                        <input type="checkbox">
                                                                        <label class="checkbox"><span class="glyphicon glyphicon-ok"></span></label>
                                                                    </div>
                                                                </div>
                                                                <span>内容管理</span>
                                                            </div>
                                                            
                                                        </div>

                                                    </div>
                                                </div>    
                                                
                                            </div>

                                        </div>                           
                                    </div>
                                </div> -->
                            <!-- 表格明细 END -->





                        </form>
                    </div>
                </div>
            </div>
            <!-- 编辑权限 END -->
        </div>
    </div>

    <script src="../../../dist/js/jquery.min.js"></script>
    <script src="../../../dist/js/common-iframe.js"></script>
    <script>


    var data = {
  "code": "200",
  "msg": "ok",
  "data": {
    "role_id": "33",
    "role_name": "角色名称33",
    "city_id": "48,49",
    "city_name": "帝都22,火炉22",
    "dep_name": "票务公司>自有平台(天猫淘宝)",
    "position_name": "天猫客服",
    "node_list": [
      {
        "node_id": "1",
        "module": "allmodule",
        "controller": "allcontroller",
        "action": "allaction",
        "title": "运营管理",
        "parent_id": "0",
        "state": "1",
        "left_nav": "1",
        "create_time": "2016-12-08 14:16:13",
        "has": 1,
        "node_list": [],
        "child": [
          {
            "node_id": "2",
            "module": "Sview",
            "controller": "project",
            "action": "",
            "title": "项目管理",
            "parent_id": "1",
            "state": "1",
            "left_nav": "1",
            "create_time": "2016-12-08 14:16:41",
            "has": 1,
            "node_list": [],
            "child": [
              {
                "node_id": "3",
                "module": "Sview",
                "controller": "project",
                "action": "add",
                "title": "新增",
                "parent_id": "2",
                "state": "1",
                "left_nav": "0",
                "create_time": "2016-12-08 14:28:56",
                "has": 1
              },
              {
                "node_id": "4",
                "module": "Sview",
                "controller": "project",
                "action": "edit",
                "title": "编辑",
                "parent_id": "2",
                "state": "1",
                "left_nav": "0",
                "create_time": "2016-12-08 14:28:59",
                "has": 1
              },
              {
                "node_id": "5",
                "module": "Sview",
                "controller": "project",
                "action": "index",
                "title": "列表",
                "parent_id": "2",
                "state": "1",
                "left_nav": "0",
                "create_time": "2016-12-08 14:52:48",
                "has": 0
              },
              {
                "node_id": "6",
                "module": "Sview",
                "controller": "project",
                "action": "detail",
                "title": "详情",
                "parent_id": "2",
                "state": "1",
                "left_nav": "0",
                "create_time": "2016-12-08 14:52:50",
                "has": 0
              },
              {
                "node_id": "11",
                "module": "Sview",
                "controller": "project",
                "action": "progress",
                "title": "项目进展",
                "parent_id": "2",
                "state": "1",
                "left_nav": "0",
                "create_time": "2016-12-08 14:53:03",
                "has": 0
              },
              {
                "node_id": "12",
                "module": "Sview",
                "controller": "project",
                "action": "changeProjectState",
                "title": "改变状态",
                "parent_id": "2",
                "state": "1",
                "left_nav": "0",
                "create_time": "2016-12-08 15:10:42",
                "has": 0
              },
              {
                "node_id": "13",
                "module": "Sview",
                "controller": "project",
                "action": "deleteProject",
                "title": "删除项目",
                "parent_id": "2",
                "state": "1",
                "left_nav": "0",
                "create_time": "2016-12-08 15:10:45",
                "has": 0
              }
            ]
          },
          {
            "node_id": "14",
            "module": "Sview",
            "controller": "schedule",
            "action": "",
            "title": "排期管理",
            "parent_id": "1",
            "state": "1",
            "left_nav": "1",
            "create_time": "2016-12-08 15:10:48",
            "has": 1,
            "node_list": [],
            "child": [
              {
                "node_id": "15",
                "module": "Sview",
                "controller": "schedule",
                "action": "index",
                "title": "排期列表",
                "parent_id": "14",
                "state": "1",
                "left_nav": "0",
                "create_time": "2016-12-08 15:10:51",
                "has": 1
              },
              {
                "node_id": "16",
                "module": "Sview",
                "controller": "schedule",
                "action": "add",
                "title": "添加",
                "parent_id": "14",
                "state": "1",
                "left_nav": "0",
                "create_time": "2016-12-08 15:10:53",
                "has": 0
              },
              {
                "node_id": "17",
                "module": "Sview",
                "controller": "schedule",
                "action": "edit",
                "title": "编辑",
                "parent_id": "14",
                "state": "1",
                "left_nav": "0",
                "create_time": "2016-12-08 15:10:56",
                "has": 0
              },
              {
                "node_id": "22",
                "module": "Sview",
                "controller": "schedule",
                "action": "progress",
                "title": "排期进展",
                "parent_id": "14",
                "state": "1",
                "left_nav": "0",
                "create_time": "0000-00-00 00:00:00",
                "has": 0
              },
              {
                "node_id": "25",
                "module": "Sview",
                "controller": "schedule",
                "action": "copySchedule",
                "title": "复制排期",
                "parent_id": "14",
                "state": "1",
                "left_nav": "0",
                "create_time": "0000-00-00 00:00:00",
                "has": 0
              },
              {
                "node_id": "26",
                "module": "Sview",
                "controller": "schedule",
                "action": "reviewSchedule",
                "title": "审核",
                "parent_id": "14",
                "state": "1",
                "left_nav": "0",
                "create_time": "0000-00-00 00:00:00",
                "has": 0
              },
              {
                "node_id": "27",
                "module": "Sview",
                "controller": "schedule",
                "action": "activeSchedule",
                "title": "激活",
                "parent_id": "14",
                "state": "1",
                "left_nav": "0",
                "create_time": "0000-00-00 00:00:00",
                "has": 0
              },
              {
                "node_id": "28",
                "module": "Sview",
                "controller": "schedule",
                "action": "cancelSchedule",
                "title": "取消",
                "parent_id": "14",
                "state": "1",
                "left_nav": "0",
                "create_time": "0000-00-00 00:00:00",
                "has": 0
              },
              {
                "node_id": "29",
                "module": "Sview",
                "controller": "schedule",
                "action": "addSellPlan",
                "title": "添加销售计划",
                "parent_id": "14",
                "state": "1",
                "left_nav": "0",
                "create_time": "0000-00-00 00:00:00",
                "has": 0
              },
              {
                "node_id": "30",
                "module": "Sview",
                "controller": "\r\nschedule",
                "action": "detail",
                "title": "排期详情",
                "parent_id": "14",
                "state": "1",
                "left_nav": "0",
                "create_time": "0000-00-00 00:00:00",
                "has": 0
              }
            ]
          }
        ]
      },
      {
        "node_id": "1",
        "module": "allmodule",
        "controller": "allcontroller",
        "action": "allaction",
        "title": "运营管理",
        "parent_id": "0",
        "state": "1",
        "left_nav": "1",
        "create_time": "2016-12-08 14:16:13",
        "has": 0,
        "node_list": [],
        "child": [
          {
            "node_id": "2",
            "module": "Sview",
            "controller": "project",
            "action": "",
            "title": "项目管理",
            "parent_id": "1",
            "state": "1",
            "left_nav": "1",
            "create_time": "2016-12-08 14:16:41",
            "has": 0,
            "node_list": [],
            "child": [
              {
                "node_id": "3",
                "module": "Sview",
                "controller": "project",
                "action": "add",
                "title": "新增",
                "parent_id": "2",
                "state": "1",
                "left_nav": "0",
                "create_time": "2016-12-08 14:28:56",
                "has": 0
              },
              {
                "node_id": "4",
                "module": "Sview",
                "controller": "project",
                "action": "edit",
                "title": "编辑",
                "parent_id": "2",
                "state": "1",
                "left_nav": "0",
                "create_time": "2016-12-08 14:28:59",
                "has": 0
              },
              {
                "node_id": "5",
                "module": "Sview",
                "controller": "project",
                "action": "index",
                "title": "列表",
                "parent_id": "2",
                "state": "1",
                "left_nav": "0",
                "create_time": "2016-12-08 14:52:48",
                "has": 0
              },
              {
                "node_id": "6",
                "module": "Sview",
                "controller": "project",
                "action": "detail",
                "title": "详情",
                "parent_id": "2",
                "state": "1",
                "left_nav": "0",
                "create_time": "2016-12-08 14:52:50",
                "has": 0
              },
              {
                "node_id": "11",
                "module": "Sview",
                "controller": "project",
                "action": "progress",
                "title": "项目进展",
                "parent_id": "2",
                "state": "1",
                "left_nav": "0",
                "create_time": "2016-12-08 14:53:03",
                "has": 0
              },
              {
                "node_id": "12",
                "module": "Sview",
                "controller": "project",
                "action": "changeProjectState",
                "title": "改变状态",
                "parent_id": "2",
                "state": "1",
                "left_nav": "0",
                "create_time": "2016-12-08 15:10:42",
                "has": 0
              },
              {
                "node_id": "13",
                "module": "Sview",
                "controller": "project",
                "action": "deleteProject",
                "title": "删除项目",
                "parent_id": "2",
                "state": "1",
                "left_nav": "0",
                "create_time": "2016-12-08 15:10:45",
                "has": 0
              }
            ]
          },
          {
            "node_id": "14",
            "module": "Sview",
            "controller": "schedule",
            "action": "",
            "title": "排期管理",
            "parent_id": "1",
            "state": "1",
            "left_nav": "1",
            "create_time": "2016-12-08 15:10:48",
            "has": 0,
            "node_list": [],
            "child": [
              {
                "node_id": "15",
                "module": "Sview",
                "controller": "schedule",
                "action": "index",
                "title": "排期列表",
                "parent_id": "14",
                "state": "1",
                "left_nav": "0",
                "create_time": "2016-12-08 15:10:51",
                "has": 0
              },
              {
                "node_id": "16",
                "module": "Sview",
                "controller": "schedule",
                "action": "add",
                "title": "添加",
                "parent_id": "14",
                "state": "1",
                "left_nav": "0",
                "create_time": "2016-12-08 15:10:53",
                "has": 0
              },
              {
                "node_id": "17",
                "module": "Sview",
                "controller": "schedule",
                "action": "edit",
                "title": "编辑",
                "parent_id": "14",
                "state": "1",
                "left_nav": "0",
                "create_time": "2016-12-08 15:10:56",
                "has": 0
              },
              {
                "node_id": "22",
                "module": "Sview",
                "controller": "schedule",
                "action": "progress",
                "title": "排期进展",
                "parent_id": "14",
                "state": "1",
                "left_nav": "0",
                "create_time": "0000-00-00 00:00:00",
                "has": 0
              },
              {
                "node_id": "25",
                "module": "Sview",
                "controller": "schedule",
                "action": "copySchedule",
                "title": "复制排期",
                "parent_id": "14",
                "state": "1",
                "left_nav": "0",
                "create_time": "0000-00-00 00:00:00",
                "has": 0
              },
              {
                "node_id": "26",
                "module": "Sview",
                "controller": "schedule",
                "action": "reviewSchedule",
                "title": "审核",
                "parent_id": "14",
                "state": "1",
                "left_nav": "0",
                "create_time": "0000-00-00 00:00:00",
                "has": 0
              },
              {
                "node_id": "27",
                "module": "Sview",
                "controller": "schedule",
                "action": "activeSchedule",
                "title": "激活",
                "parent_id": "14",
                "state": "1",
                "left_nav": "0",
                "create_time": "0000-00-00 00:00:00",
                "has": 0
              },
              {
                "node_id": "28",
                "module": "Sview",
                "controller": "schedule",
                "action": "cancelSchedule",
                "title": "取消",
                "parent_id": "14",
                "state": "1",
                "left_nav": "0",
                "create_time": "0000-00-00 00:00:00",
                "has": 0
              },
              {
                "node_id": "29",
                "module": "Sview",
                "controller": "schedule",
                "action": "addSellPlan",
                "title": "添加销售计划",
                "parent_id": "14",
                "state": "1",
                "left_nav": "0",
                "create_time": "0000-00-00 00:00:00",
                "has": 0
              },
              {
                "node_id": "30",
                "module": "Sview",
                "controller": "\r\nschedule",
                "action": "detail",
                "title": "排期详情",
                "parent_id": "14",
                "state": "1",
                "left_nav": "0",
                "create_time": "0000-00-00 00:00:00",
                "has": 0
              }
            ]
          }
        ]
      }
    ]
  }
};

//权限设置表格  ---START
(function(data){
    var tableHtml = createTableHtml(data);

    $('.setting-table tr:first').after(tableHtml);

    function createTableHtml(list)
    {
        var tableHtml = '',
            checkBox  = '<div class="checkbox-wrap js-checkbox-wrap">'+
                            '<input type="checkbox">'+
                            '<label class="checkbox"><span class="glyphicon glyphicon-ok"></span></label>'+
                        '</div>',
            checkedCheckBox  = '<div class="checkbox-wrap js-checkbox-wrap">'+
                            '<input type="checkbox" checked="checked">'+
                            '<label class="checkbox"><span class="glyphicon glyphicon-ok"></span></label>'+
                        '</div>';

        for(var k = 0; k<list.length ; k++)
        {
            //第一行
            tableHtml += '<tr>';

            var lv2List = list[k].child,
                rowSpan = lv2List.length;

            if (rowSpan<=1)
            {
                rowSpan = '';
            }

            //第一列
            tableHtml += '<td tid="'+k+'-1" pid=0 rowspan="'+rowSpan+'">'+'<div class="checkbox-item-wrap">'+( (list[k].has==1) ? checkedCheckBox : checkBox )+'<span oid="'+list[k].node_id+'" class="checkbox-label">'+list[k].title+'</span></div></td>';

            //第二列

            tableHtml += '<td tid="'+k+'-2" pid="'+k+'-1">'+'<div class="checkbox-item-wrap">'+( (lv2List[0].has==1) ? checkedCheckBox : checkBox )+'<span oid="'+lv2List[0].node_id+'" class="checkbox-label">'+lv2List[0].title+'</span></div></td>';
            var lv2NodeId = lv2List[0].node_id;
            //第三列
            var lv3List = lv2List[0].child;
            tableHtml += '<td tid="'+k+'-3" pid="'+k+'-2">';
            for(var k1 = 0; k1 < lv3List.length ; k1++)
            {
                tableHtml += '<div class="checkbox-item-wrap">'+( (lv3List[k1].has==1) ? checkedCheckBox : checkBox )+'<span oid="'+lv3List[k1].node_id+'" class="checkbox-label">'+lv3List[k1].title+'</span></div>';
            }
            tableHtml += '</td>';
            
            tableHtml += '</tr>';


            //下面的行
            for(var k2 = 1; k2 < rowSpan ; k2++)
            {
                tableHtml += '<tr>';

                //第二列，第一列被上面的行占掉
                tableHtml += '<td tid="'+k+'-row-'+k2+'-2" pid="'+k+'-1">'+'<div class="checkbox-item-wrap">'+( (lv2List[k2].has==1) ? checkedCheckBox : checkBox )+'<span oid="'+lv2List[k2].node_id+'" class="checkbox-label">'+lv2List[k2].title+'</span></div></td>';

                lv2NodeId = lv2List[k2].node_id; 
                //第三列
                tableHtml += '<td tid="'+k+'-row-'+k2+'-3" pid="'+k+'-row-'+k2+'-2">';
                lv3List    = lv2List[k2].child;
                for(var k1 = 0; k1 < lv3List.length ; k1++)
                {
                    tableHtml += '<div class="checkbox-item-wrap">'+( (lv3List[k1].has==1) ? checkedCheckBox : checkBox )+'<span oid="'+lv3List[k1].node_id+'" class="checkbox-label">'+lv3List[k1].title+'</span></div>';
                }
                tableHtml += '</td>';

                tableHtml += '</tr>';

            }            

        }

        return tableHtml;
    }

    function createTreeTableHtml(data)
    {
        for(var k = 0; k<list.length ; k++)
        {
            tableHtml += '<tr>';
            if (list[k].child.length>0)
            {
                createTreeTableHtml(list[k].child);
            }

            tableHtml += '</tr>';
        }
    }

    //表格勾选框
    $('body').on('click','.setting-table .js-checkbox-wrap',function(){
        var checkbox = $(this).find('input[type="checkbox"]'),
            parentTd = checkbox.parents('td:first'),
            rowSpan  = parentTd.attr('rowspan');


            

        if (checkbox.attr('checked') == 'checked')
        {
            //取消选中
            checkbox.removeAttr('checked');
            parentTd.nextAll('td').find('.js-checkbox-wrap input').removeAttr('checked');

            if (rowSpan>1)
            {
                parentTd.parents('tr:first').nextAll('tr:lt('+(rowSpan-1)+')').find('.js-checkbox-wrap input').removeAttr('checked');
            }
            uncheckParents(parentTd);
        }
        else
        {
            //选中
            checkbox.attr('checked','checked');
            parentTd.nextAll('td').find('.js-checkbox-wrap input').attr('checked','checked');
            if (rowSpan>1)
            {
                parentTd.parents('tr:first').nextAll('tr:lt('+(rowSpan-1)+')').find('.js-checkbox-wrap input').attr('checked','checked');
            }
            checkParents(parentTd)
        }

        var allCheckbox   = $('.setting-table .js-checkbox-wrap input'),
            allCheckedBox = $('.setting-table .js-checkbox-wrap input[checked="checked"]');

        if (allCheckbox.length == allCheckedBox.length)
        {
            $('.setting-table .js-all-checkbox-wrap input[type="checkbox"]').attr('checked','checked');
        }
        else
        {
            $('.setting-table .js-all-checkbox-wrap input[type="checkbox"]').removeAttr('checked');
        }
        
    });

    //全选勾选框
    $('body').on('click','.setting-table .js-all-checkbox-wrap',function(){
        var checkbox = $(this).find('input[type="checkbox"]');

        if (checkbox.attr('checked') == 'checked')
        {
            //取消选中
            checkbox.removeAttr('checked');
            $('.setting-table .js-checkbox-wrap input').removeAttr('checked');
        }
        else
        {
            //选中
            checkbox.attr('checked','checked');            
            $('.setting-table .js-checkbox-wrap input').attr('checked','checked');
        }
        
    });

    function checkParents($node)
    {   
        var pid = $node.attr('pid');
        if (pid != 0 && pid)
        {
            $('[tid="'+pid+'"]').find('.js-checkbox-wrap input').attr('checked','checked');
            checkParents($('[tid="'+pid+'"]'));
        }
        else
        {
            return;
        }
    }

    function uncheckParents($node)
    {   

        var pid = $node.attr('pid');

        if (!pid || pid==0)
        {
            return;
        }

        //检测是这个pid的节点是否全部都取消勾选了如果是则取消id是这个pid的节点的check
        var length = $('[pid="'+pid+'"]').find('.js-checkbox-wrap input[checked="checked"]').length;

        if ( length < 1 )
        {
            $('[tid="'+pid+'"]').find('.js-checkbox-wrap input').removeAttr('checked');
            uncheckParents($('[tid="'+pid+'"]'));
        }
        else
        {
            return;
        }
    }
}(data.data.node_list));
//权限设置表格  ---END


    </script>
</body>
</html>